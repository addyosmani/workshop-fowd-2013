define(["text!templates/tasks/task.html"],function(e){var t=Backbone.View.extend({tagName:"li",className:"controls well task row",template:_.template(e),events:{click:"open","change .check-task":"toggle"},initialize:function(e){this.parentView=e.parentView,this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){return this.$el.data("taskId",this.model.get("id")),this.$el.html(this.template(this.model.toJSON())),this.$(".check-task").attr("checked",this.model.get("status")=="completed"),this},open:function(){this.parentView.activeTaskView&&this.parentView.activeTaskView.close(),this.$el.addClass("active"),this.parentView.activeTaskView=this,this.parentView.editTask(this.model)},close:function(){this.$el.removeClass("active")},toggle:function(e){return this.model.set("status",$(e.currentTarget).attr("checked")?"completed":"needsAction"),this.model.get("status")==="needsAction"&&this.model.set("completed",null),this.model.save(),this}});return t});